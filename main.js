!function(){"use strict";var e="",t=e+"7d328e1563f0877d1419.png",n=e+"ec557dd30fc14a31eb0b.jpg";document.querySelector(".pic"),document.querySelector(".pic__img"),document.querySelector(".pic__title");class s{constructor(e,t){let{data:n,handleCardClick:s}=e;this._name=n.name,this._link=n.link,this._handleCardClick=s,this._templateSelector=t}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__title").textContent=this._name,this._element.querySelector(".element__pic").src=this._link,this._element.querySelector(".element__pic").alt="Photo of ".concat(this._name),this._element}_toggleLike(e){e.target.classList.toggle("element__icon-img_active")}_deleteElement(){this._element.remove(),this._element=null}_setEventListeners(){this._element.querySelector(".element__delete").addEventListener("click",(()=>this._deleteElement())),this._element.querySelector(".element__pic").addEventListener("click",(()=>this._handleCardClick())),this._element.querySelector(".element__icon-img").addEventListener("click",this._toggleLike)}}class i{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClickClose=this._handleOverlayClickClose.bind(this),this._closeBtn=this._popupElement.querySelector(".popup__button-closed"),this.close=this.close.bind(this)}open(){this._setEventListeners(),this._popupElement.classList.add("popup_opened")}close(){this._popupElement.classList.remove("popup_opened"),this._removeEventListeners()}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClickClose(e){e.target===e.currentTarget&&this.close()}_removeEventListeners(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleOverlayClickClose),this._closeBtn.removeEventListener("click",this.close)}_setEventListeners(){document.addEventListener("keydown",this._handleEscClose),this._closeBtn.addEventListener("click",this.close),this._popupElement.addEventListener("click",this._handleOverlayClickClose)}}class o extends i{constructor(e){let{popupSelector:t,formSubmitHandle:n}=e;var s,i;super(t),i=e=>{e.preventDefault(),this._formSubmitHandle(this._getInputValue())},(s="_handleSubmit")in this?Object.defineProperty(this,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[s]=i,this._formSubmitHandle=n,this._formElement=this._popupElement.querySelector(".popup__form")}_getInputValue(){const e=[...this._formElement.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}_setEventListeners(){this._formElement.addEventListener("submit",this._handleSubmit),super._setEventListeners()}_removeEventListeners(){this._formElement.removeEventListener("submit",this._handleSubmit),super._removeEventListeners()}close(){super.close(),this._formElement.reset()}}class r{constructor(e,t){var n,s;s=()=>!this._inputList.every((e=>e.validity.valid)),(n="_hasInvalidInput")in this?Object.defineProperty(this,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[n]=s,this._formElement=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}_showInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){if(this._hasInvalidInput())return this._buttonElement.classList.add(this._inactiveButtonClass),void(this._buttonElement.disabled=!0);this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const l=document.querySelector(".profile__button-edit"),a=document.querySelector(".profile__button"),c=document.querySelector(".edit__form"),_=c.querySelector(".edit__input_type_name"),u=c.querySelector(".edit__input_type_career"),m=document.querySelector(".add").querySelector(".add__form"),d=(m.querySelector(".add__input_type_title"),m.querySelector(".add__input_type_link"),{inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});document.querySelector("#image-logo").src=t,document.querySelector("#image-profile").src=n;const p=new r(c,d),h=new r(m,d),E=new class extends i{constructor(e){super(e),this._image=this._popupElement.querySelector(".pic__img"),this._title=this._popupElement.querySelector(".pic__title")}open(e){this._image.src=e.link,this._title.textContent=e.name,this._image.alt="Photo of ".concat(e.name),super.open()}}(".pic"),v=e=>new s({data:e,handleCardClick:()=>{E.open(e)}},".element-template").generateCard(),y=new o({popupSelector:".add",formSubmitHandle:e=>{const t=e.inputTitle,n=e.inputLink,s=v({name:t,link:n});C.addItem(s),y.close()}}),S=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n)}getUserInfo(){return this._userInfo={name:this._nameElement.textContent,job:this._jobElement.textContent},this._userInfo}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}({nameSelector:".profile__info-name",jobSelector:".profile__info-career"}),b=new o({popupSelector:".edit",formSubmitHandle:e=>{const t={name:e.inputName,job:e.inputCareer};S.setUserInfo(t.name,t.job),b.close()}}),C=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItem(){this._items.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Yoesmite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald moutains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=v(e);C.addItem(t)}},".elements");C.renderItem(),l.addEventListener("click",(()=>{b.open();const{name:e,job:t}=S.getUserInfo();_.value=e,u.value=t})),a.addEventListener("click",(()=>{y.open(),h.toggleButtonState()})),p.enableValidation(),h.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R2ZlLEVBQWNWLG1CQUNkVyxFQUFhWCxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8vIHBpYyB2YXJpYWJsZVxuY29uc3QgcGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBpYycpO1xuY29uc3QgcGljSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBpY19faW1nJyk7XG5jb25zdCBwaWNUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waWNfX3RpdGxlJyk7XG5cbmV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3BpYycpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fcGljJykuYWx0ID0gYFBob3RvIG9mICR7dGhpcy5fbmFtZX1gO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfdG9nZ2xlTGlrZShldnQpIHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2ljb24taW1nX2FjdGl2ZScpO1xuICB9XG5cbiAgX2RlbGV0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTsgLy8gdGhpcyBpcyBhIENhcmQgaW5zdGFuY2UgLCBiZWNhdXNlIHRoZSBtZXRob2QgaXMgZGVjbGFyZWQgYXMgYW4gYXJyb3cgZnVuY3Rpb25cbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9kZWxldGVFbGVtZW50KCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waWMnKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pY29uLWltZycpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl90b2dnbGVMaWtlKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrQ2xvc2UgPSB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2tDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlZCcpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7IFxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVPdmVybGF5Q2xpY2tDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICdjbGljaycsXG4gICAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2tDbG9zZVxuICAgICk7XG4gICAgdGhpcy5fY2xvc2VCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuXG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAgdGhpcy5jbG9zZSk7XG5cbiAgICAvLyBmb3IgY2xpY2sgb3ZlcmxheSB0byBjbG9zZSBwb3B1cFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbGlja0Nsb3NlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXRIYW5kbGUgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybVN1Ym1pdEhhbmRsZSA9IGZvcm1TdWJtaXRIYW5kbGU7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZSgpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpXTtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlKHRoaXMuX2dldElucHV0VmFsdWUoKSk7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlU3VibWl0KTtcbiAgICBzdXBlci5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkgeyBcbiAgICBzdXBlci5jbG9zZSgpOyBcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xufSBcbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIG9wdGlvbikge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbi5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9uLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb24uaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb24uaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb24uZXJyb3JDbGFzcztcbiAgfVxuXG4gIC8vIHNob3cgaW5wdXQgZXJyb3IgY2xhc3MgYW5kIGlucHV0IG1lc3NhZ2VcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvLyBoaWRlIGlucHV0IGVycm9yIGNsYXNzIGFuZCBpbnB1dCBtZXNzYWdlXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICAvLyBjaGVjayBlYWNoIGlucHV0IGFyZSB2YWxpZCBvciBub3RcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBjaGVjayBpZiBpbnB1dCBoYXMgc29tZSBpbnZhbGlkIHJldHVybiB0cnVlIGZvciB1c2luZyBvbiB0b2dnbGVCdXR0b25TdGF0ZVxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfTtcblxuICAvLyBmdW5jdGlvbiBmb3Igc2V0IGJ1dHRvbiBpZiBoYXNJbnZhbGlkSW5wdXQgcmV0dXJuIGFkZCBpbmFjdGl2ZUJ1dHRvbkNsYXNzIHRvIGJ1dHRvblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICAvLyBzZXQgaW5wdXQgZWxlbWVudCBhbmQgYnV0dG9uIGVsZW1lbnQgdG8gY2hlY2tJbnB1dFZhbGlkaXR5IGFuZCB0b2dnbGVCdXR0b25TdGF0ZVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcbiAgICBdOyAvLyAuLi4gc2ltaWxhciB0byBBcnJheS5mcm9tXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLy8gZW5hYmxlIHZhbGlkYXRpb24gZnVuY3Rpb25cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG4iLCIvLyBlZGl0IG5hbWUgYnV0dG9uIGZvciBvcGVuIGVkaXQgdXNlciBpbmZvXG5leHBvcnQgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tZWRpdCcpO1xuXG4vLyBhZGQgYnV0dG9uIGZvciBvcGVuIGFkZCBmb3JtXG5leHBvcnQgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xuXG4vLyBlZGl0IHZhcmlhYmxlXG5leHBvcnQgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdF9fZm9ybScpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0X19pbnB1dF90eXBlX25hbWUnKTtcbmV4cG9ydCBjb25zdCBpbnB1dEpvYiA9IGVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5lZGl0X19pbnB1dF90eXBlX2NhcmVlcicpO1xuXG4vLyBhZGQgdmFyaWFibGVcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkJyk7XG5leHBvcnQgY29uc3QgYWRkRm9ybSA9IGFkZENhcmRQb3B1cC5xdWVyeVNlbGVjdG9yKCcuYWRkX19mb3JtJyk7XG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGFkZEZvcm0ucXVlcnlTZWxlY3RvcignLmFkZF9faW5wdXRfdHlwZV90aXRsZScpXG5leHBvcnQgY29uc3QgaW5wdXRMaW5rID0gYWRkRm9ybS5xdWVyeVNlbGVjdG9yKCcuYWRkX19pbnB1dF90eXBlX2xpbmsnKVxuXG4vLyBzZXQgYWxsIHBhcmFtZXRlciBmb3IgYWRkIGludG8gZW5hYmxlVmFsaWRhdGlvbiBmb3IgZWRpdCBmb3JtXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcbn07XG5cbi8vICByZW5kZXIgY2FyZCBlbGVtZW50IGZpZWxkc1xuZXhwb3J0IGNvbnN0IGRhdGEgPSBbXG4gIHtcbiAgICBuYW1lOiAnWW9lc21pdGUgVmFsbGV5JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMYWtlIExvdWlzZScsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQmFsZCBtb3V0YWlucycsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGF0ZW1hcicsXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdWYW5vaXNlIE5hdGlvbmFsIFBhcmsnLFxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZycsXG4gIH0sXG5dO1xuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgbG9nb1NyYyBmcm9tICcuLi9pbWFnZXMvbG9nby5wbmcnO1xuaW1wb3J0IHByb2ZpbGVTcmMgZnJvbSAnLi4vaW1hZ2VzL3Byb2ZpbGUuanBnJztcblxuY29uc3QgbG9nbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbWFnZS1sb2dvJyk7XG5sb2dvLnNyYyA9IGxvZ29TcmM7XG5cbmNvbnN0IHByb2ZpbGVJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW1hZ2UtcHJvZmlsZScpO1xucHJvZmlsZUltZy5zcmMgPSBwcm9maWxlU3JjO1xuXG4vLyAgaW1wb3J0IGNsYXNzXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5cbmltcG9ydCB7XG4gIGVkaXRCdG4sXG4gIGFkZEJ0bixcbiAgZWRpdEZvcm0sXG4gIGlucHV0TmFtZSxcbiAgaW5wdXRKb2IsXG4gIGFkZEZvcm0sXG4gIGNvbmZpZyxcbiAgZGF0YVxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuLy8gLy8gZGVjbGFyZSBjbGFzcyBhcyBvYmogaGVyZVxuLy8gIGZvcm1WYWxpZGl0b3IgQ2xhc3NcbmNvbnN0IGVkaXRWYWxpZGl0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihlZGl0Rm9ybSwgY29uZmlnKTtcbmNvbnN0IGFkZFZhbGlkaXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGFkZEZvcm0sIGNvbmZpZyk7XG5cbi8vIHBvcHVwIGltYWdlXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucGljJyk7XG5cbi8vIGZ1bmN0aW9uIGZvciBjcmVhdGUgY2FyZCBlbGVtZW50IGZyb20gQ2FyZCBjbGFzc1xuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBkYXRhOiBkYXRhLFxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihkYXRhKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICAnLmVsZW1lbnQtdGVtcGxhdGUnXG4gICk7XG5cbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59O1xuXG4vLyBjcmVhdGUgYWRkIGZvcm0gcG9wdXAgZnJvbSBQb3B1cFdpdGhGb3JtIGNsYXNzXG5jb25zdCBhZGRGb3JtU3VibWl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6ICcuYWRkJyxcbiAgZm9ybVN1Ym1pdEhhbmRsZTogKGlucHV0VmFsdWVzKSA9PiB7XG4gICAgLy8gZ2V0IGlucHV0VmFsdWVzIGZyb20gbmFtZVxuICAgIGNvbnN0IG5ld0NhcmRUaXRsZSA9IGlucHV0VmFsdWVzWydpbnB1dFRpdGxlJ107XG4gICAgY29uc3QgbmV3Q2FyZExpbmsgPSBpbnB1dFZhbHVlc1snaW5wdXRMaW5rJ107XG5cbiAgICAvLyBOZXcgcGxhY2UgY2FyZCBvYmplY3RcbiAgICBjb25zdCBuZXdJbnB1dFZhbHVlcyA9IHtcbiAgICAgIG5hbWU6IG5ld0NhcmRUaXRsZSxcbiAgICAgIGxpbms6IG5ld0NhcmRMaW5rLFxuICAgIH07XG5cbiAgICAvLyBjcmVhdGUgY2FyZCBmcm9tIG5ld0lucHV0VmFsdWVzXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKG5ld0lucHV0VmFsdWVzKTtcblxuICAgIC8vIGFkZCBuZXcgY2FyZEVsZW1lbnQgdG8gY2FyZExpc3Qgb2JqZWN0IG9mIFNlY3Rpb24gY2xhc3NcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcblxuICAgIGFkZEZvcm1TdWJtaXRQb3B1cC5jbG9zZSgpO1xuICB9LFxufSk7XG5cbi8vICBydW4gc2V0RXZlbnRMaXN0ZW5lcnMgd2hlbiB1c2VyIHN1Ym1pdCBmb3JtXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8tbmFtZScsXG4gIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8tY2FyZWVyJyxcbn0pO1xuXG5jb25zdCBlZGl0Rm9ybVN1Ym1pdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiAnLmVkaXQnLFxuICBmb3JtU3VibWl0SGFuZGxlOiAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAvLyBnZXQgaW5wdXRWYWx1ZXMgZnJvbSBuYW1lXG5cbiAgICBjb25zdCBuZXdVc2VyTmFtZSA9IGlucHV0VmFsdWVzWydpbnB1dE5hbWUnXTtcbiAgICBjb25zdCBuZXdVc2VySm9iID0gaW5wdXRWYWx1ZXNbJ2lucHV0Q2FyZWVyJ107XG5cbiAgICAvLyBOZXcgVXNlciBpbmZvIG9iamVjdFxuICAgIGNvbnN0IG5ld0lucHV0VmFsdWVzID0ge1xuICAgICAgbmFtZTogbmV3VXNlck5hbWUsXG4gICAgICBqb2I6IG5ld1VzZXJKb2IsXG4gICAgfTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhuZXdJbnB1dFZhbHVlcy5uYW1lLCBuZXdJbnB1dFZhbHVlcy5qb2IpO1xuXG4gICAgZWRpdEZvcm1TdWJtaXRQb3B1cC5jbG9zZSgpO1xuICB9LFxufSk7XG5cbi8vIHNob3cgQ2FyZCBsaXN0IHdpdGggc2VjdGlvbiBjbGFzc1xuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBkYXRhLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgJy5lbGVtZW50cydcbik7XG5cbi8vIHJlbmRlciBpdGVtXG5jYXJkTGlzdC5yZW5kZXJJdGVtKCk7XG5cbi8vIHNob3cgZWRpdCBmb3JtIHdoZW4gY2xpY2sgZWRpdCBidXR0b24gb24gcHJvZmlsZVxuZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZWRpdEZvcm1TdWJtaXRQb3B1cC5vcGVuKCk7XG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dEpvYi52YWx1ZSA9IGpvYjtcbn0pO1xuXG4vLyBzaG93IGFkZCBmb3JtIHdoZW4gY2xpY2sgYWRkIGJ1dHRvbiBvbiBwcm9maWxlXG5hZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGFkZEZvcm1TdWJtaXRQb3B1cC5vcGVuKCk7XG4gIGFkZFZhbGlkaXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufSk7XG5cbmVkaXRWYWxpZGl0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkVmFsaWRpdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGljX19pbWcnKTtcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGljX190aXRsZScpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBQaG90byBvZiAke2RhdGEubmFtZX1gO1xuXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fdXNlckluZm8gPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb257XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtc1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXG4gICAgfVxuICAgIFxuICAgIGFkZEl0ZW0oaXRlbSl7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pXG4gICAgfVxuXG4gICAgcmVuZGVySXRlbSgpe1xuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKVxuICAgICAgICB9KVxuICAgIH1cbiAgICBcbn1cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9lbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfdG9nZ2xlTGlrZSIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9kZWxldGVFbGVtZW50IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZU92ZXJsYXlDbGlja0Nsb3NlIiwiX2Nsb3NlQnRuIiwiY2xvc2UiLCJvcGVuIiwiYWRkIiwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzIiwia2V5IiwiY3VycmVudFRhcmdldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVN1Ym1pdEhhbmRsZSIsInN1cGVyIiwicHJldmVudERlZmF1bHQiLCJfZm9ybVN1Ym1pdEhhbmRsZSIsIl9nZXRJbnB1dFZhbHVlIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJfaGFuZGxlU3VibWl0IiwicmVzZXQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJvcHRpb24iLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwiZWRpdEJ0biIsImFkZEJ0biIsImVkaXRGb3JtIiwiaW5wdXROYW1lIiwiaW5wdXRKb2IiLCJhZGRGb3JtIiwiY29uZmlnIiwibG9nb1NyYyIsInByb2ZpbGVTcmMiLCJlZGl0VmFsaWRpdG9yIiwiYWRkVmFsaWRpdG9yIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl90aXRsZSIsImNyZWF0ZUNhcmQiLCJhZGRGb3JtU3VibWl0UG9wdXAiLCJuZXdDYXJkVGl0bGUiLCJuZXdDYXJkTGluayIsImNhcmRFbGVtZW50IiwiY2FyZExpc3QiLCJhZGRJdGVtIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJfdXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsImVkaXRGb3JtU3VibWl0UG9wdXAiLCJuZXdJbnB1dFZhbHVlcyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwicHJlcGVuZCIsInJlbmRlckl0ZW0iXSwic291cmNlUm9vdCI6IiJ9